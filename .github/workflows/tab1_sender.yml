name: demo
on: 
  push:
  pull_request:
  release:
jobs:
  preparation:
    runs-on: self-hosted-2
    steps:
      # Runs a set of commands using the runners shell
      - name: Create Build Environment
        run: |
          echo Sender run
          sudo modprobe virtio-lo
          sudo modprobe virtio_gpu
          
          sudo rm -rf /run/user/0
          sudo mkdir -p /run/user/0
          sudo export XDG_RUNTIME_DIR=/run/user/0
          sudo rvgpu-proxy -l 0 -s 1280x720@0,0 -n 127.0.0.1 &
          sudo export LD_LIBRARY_PATH=/usr/lib/mesa-virtio
          sudo weston --backend drm-backend.so --tty=2 --seat=seat_virtual -i 0 --log=/tmp/weston.log &
          sudo glmark2-es2-wayland

          
          
